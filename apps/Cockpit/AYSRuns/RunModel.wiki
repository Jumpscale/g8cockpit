@usedefaults

{{timestamp}}

{{AYSRun: repo:$$repo runid:$$runid}}


h2. Run $$runid Details:

*Repo*: [${model.reponame}|/cockpit/repo?repo=${model.reponame}]
{% if model.state in ['ERROR'] %}
    *State*: {{html: <red style='color:red'>ERROR</red> }} [ (Details)|/cockpit/action?runid=ays_${model.reponame}&actionkey=${model.actionkey}]
{% elif model.state in 'OK' %}
    *State*: {{html: <green style='color:green'>OK</green> }}
{% else %}
    *State*:${mode.state}
{% endif -%}

*Time*: ${model.time}

*Steps*:
{% for step in model.steps -%}
    * ${step.action}:
    {% for key, value in step.items() -%}
        {% if not key in ['action', 'actions'] -%}
            ** ${key}: ${value}
        {% elif key == 'actions' -%}
            ** actions:
           {% for actiondetail in value -%}
                *** ${actiondetail.key}
                    {% if actiondetail.state in ['ERROR'] %}
                        **** actiondetail.state: {{html: <red style='color:red'>ERROR</red> }}
                        **** error details: [(Details)|/cockpit/action?runid=ays_${model.reponame}&actionkey=${model.actionkey}]
                        **** result:
                        {{code:
                            ${actiondetail.result}
                        }}
                    {% elif actiondetail.state in 'OK' %}
                        **** actiondetail.state: {{html: <green style='color:green'>OK</green> }}
                        **** result: ${actiondetail.result}
                    {% else %}
                        **** state: ${actiondetail.state}
                        **** result: ${actiondetail.result}
                    {% endif -%}
                **** [HRD and Source |/cockpit/stepinfo?repo=${model.reponame}&hrd=${actiondetail.hrd}&source=${actiondetail.source}]
            {% endfor -%}
        {% endif -%}
    {% endfor -%}
{% endfor -%}